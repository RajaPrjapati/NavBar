<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Rent Mahadev Bhaiya</title>
<!-- jsPDF -->
<script src="https://cdnjs.cloudflare.com/ajax/libs/jspdf/2.5.1/jspdf.umd.min.js"></script>
<!-- jsPDF AutoTable -->
<script src="https://cdnjs.cloudflare.com/ajax/libs/jspdf-autotable/3.5.28/jspdf.plugin.autotable.min.js"></script>
<style>
body {
  font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
  background: #fafafa;
  margin: 20px;
  color: #333;
}
h2 { text-align:center; color:#d6336c; margin-bottom:10px; }
a { text-decoration:none; color:inherit; }
.top-bar { display:flex; justify-content:center; align-items:center; gap:12px; flex-wrap:wrap; margin:20px auto; max-width:650px; }
#searchBox { flex:1; min-width:220px; padding:10px 14px; border:2px solid #d6336c; border-radius:10px; font-size:15px; outline:none; box-shadow:0 2px 5px rgba(0,0,0,0.08); transition:0.2s;}
#searchBox:focus { border-color:#b02050; box-shadow:0 3px 8px rgba(214,51,108,0.25);}
#downloadBtn { background:linear-gradient(135deg,#d6336c,#b02050); color:white; border:none; border-radius:10px; padding:10px 18px; font-size:15px; font-weight:600; cursor:pointer; box-shadow:0 3px 8px rgba(0,0,0,0.2); transition:all 0.25s ease-in-out;}
#downloadBtn:hover { transform:translateY(-2px); box-shadow:0 5px 12px rgba(0,0,0,0.3);}
.table-container { overflow-x:auto; margin-top:20px;}
table { width:100%; border-collapse:collapse; background:white; border-radius:12px; overflow:hidden; box-shadow:0 6px 14px rgba(0,0,0,0.08);}
th, td { border:1px solid #eee; text-align:center; padding:12px; font-size:14px;}
th { background:linear-gradient(135deg,#d6336c,#b02050); color:white; font-weight:600; position:sticky; top:0; z-index:2;}
tr:nth-child(even) { background:#fdf2f7;}
tr:hover { background:#ffe6f0; transition:0.2s;}
.total-row { background:#d6336c; color:white; font-weight:bold;}
td p { font-size:11px; margin:0; line-height:1.3; }
</style>
</head>
<body>
<h2><a href="index.html">Rent - Mahadev Bhaiya (14 June 2024)</a></h2>

<div class="top-bar">
  <input type="text" id="searchBox" placeholder="ðŸ”Ž Search by Months (e.g., 14Jan - 14Feb)">
  <button id="downloadBtn">ðŸ“„ Download PDF</button>
</div>

<div class="table-container">
<table id="myTable">
<thead>
<tr>
<th>S.R</th><th>Months</th><th>Rent</th><th>R.F</th><th>R.T</th><th>Total Unit</th><th>Unit Amount</th><th>Moter Bill</th><th>Total</th><th>Comments</th>
</tr>
</thead>
<tr>
<td>1.</td>
<td>14Jan - 14Feb 2025</td>
<td>2300</td>
<td>1</td>
<td>5</td>
<td>4</td>
<td>40</td>
<td>90</td>
<td>2400</td>
<td><p>Paid 12/08/2025 <br> Rent: 2300 <br> Bijli Bill: 1046 <br> Moter Bill: 60 </p></td>
</tr>
<tr class="total-row">
<th></th><th>Total</th><th>2300</th><th>1</th><th>5</th><th>4</th><th>40</th><th>60</th><th>2400</th><th></th>
</tr>
</table>
</div>

<script>
// Search by full Months text (exact or starting with)
document.getElementById("searchBox").addEventListener("keyup", function() {
  let filter = this.value.toLowerCase().trim();
  let rows = document.querySelectorAll("#myTable tr");
  rows.forEach((row, index) => {
    if(index===0 || row.classList.contains("total-row")) return;
    let months = row.cells[1].textContent.toLowerCase().trim();
    row.style.display = (months === filter || months.startsWith(filter)) ? "" : "none";
  });
});

// PDF Download
document.getElementById("downloadBtn").addEventListener("click", () => {
  const { jsPDF } = window.jspdf;
  const doc = new jsPDF("landscape");

  doc.setFontSize(18);
  doc.setTextColor(214,51,108);
  doc.text("Rent Details of Mahadev Bhaiya", 14, 20);

  let table = document.getElementById("myTable");
  let head = [];
  let body = [];

  for(let i=0;i<table.rows[0].cells.length;i++) head.push(table.rows[0].cells[i].innerText);

  for(let i=1;i<table.rows.length;i++){
    let rowData=[];
    let cells = table.rows[i].cells;
    for(let j=0;j<cells.length;j++){
      let val=cells[j].innerText;
      if(val.includes("Paid")) rowData.push({content:val,styles:{textColor:[0,128,0],fontStyle:'bold'}});
      else rowData.push(val);
    }
    body.push(rowData);
  }

  doc.autoTable({
    head:[head],
    body:body,
    startY:30,
    theme:"grid",
    headStyles:{fillColor:[214,51,108],textColor:255,fontSize:10,halign:"center"},
    bodyStyles:{fontSize:9,halign:"center"},
    columnStyles:{0:{cellWidth:12},1:{cellWidth:40}},
    styles:{cellPadding:3},
    didDrawPage: (data)=>{
      let today=new Date();
      let dateStr=today.toLocaleDateString();
      let timeStr=today.toLocaleTimeString([], {hour:"2-digit",minute:"2-digit"});
      doc.setFontSize(8);
      doc.text(`Generated on: ${dateStr} ${timeStr}`,14,doc.internal.pageSize.height - 5);
    }
  });

  let today = new Date();
  let time = today.toLocaleTimeString([], {hour:"2-digit",minute:"2-digit"});
  let fileName = `Rent_Mahadev_Bhaiya_${today.getDate()}_${today.toLocaleString('default',{month:'short'})}_${today.getFullYear()}_${time}.pdf`;
  doc.save(fileName);
});
</script>
</body>
</html>
